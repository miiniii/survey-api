<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>설문 통계</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
  <div class="card shadow p-4" style="max-width: 800px; margin: auto;">
    <!-- 설문 제목 -->
    <h4 class="mb-4 text-center fw-bold" th:text="${statistics.title}">질문 제목 통계 결과</h4>

    <!-- 응답 수 및 평균 점수 -->
    <div class="row justify-content-center text-center mb-4">
      <div class="col-md-6">
        <div class="border rounded p-3 bg-white h-100">
          <h6 class="mb-2">총 응답 수</h6>
          <div class="fs-4 fw-semibold" th:text="${statistics.totalResponses}">0</div>
        </div>
      </div>

      <div class="col-md-6" th:if="${surveyType == 'RATING'}">
        <div class="border rounded p-3 bg-white h-100">
          <h6 class="mb-2">평균 점수</h6>
          <div class="fs-4 fw-semibold"
               th:text="${#numbers.formatDecimal(statistics.averageRating, 1, 2)}">0.00</div>
        </div>
      </div>
    </div>

    <!-- 응답 분포 -->
    <div th:if="${statistics.optionCounts != null}" class="mt-5">
      <h5 class="mb-3">응답 선택지 분포</h5>
      <div class="list-group">
        <div class="list-group-item d-flex justify-content-between align-items-center"
             th:each="entry : ${statistics.optionCounts.entrySet()}">
          <span th:text="${entry.key}">옵션 이름</span>
          <span class="badge bg-primary rounded-pill" th:text="${entry.value + ' 명'}">0 명</span>
        </div>
      </div>
    </div>

    <!-- 돌아가기 버튼 -->
    <div class="text-center mt-4">
      <a href="/admin/dashboard" class="btn btn-secondary">← 관리자 대시보드로</a>
    </div>
  </div>
</div>
</body>
</html>
