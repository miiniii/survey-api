<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>설문 관리</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
  <div class="card shadow p-4" style="max-width: 900px; margin: auto;">
    <h4 class="mb-4" th:text="'회사명: ' + ${surveyData.company} + ' 설문 목록'"></h4>

    <div th:each="category : ${surveyData.categories}">
      <h5 class="mt-4 mb-2" th:text="${category.name}">카테고리명</h5>
      <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center"
            th:each="q : ${category.questions}">
          <span>
            <strong th:text="${q.title}">질문 제목</strong>
            <small th:if="${q.subtitle != null}" th:text="' - ' + ${q.subtitle}" class="text-muted"></small>
            <span class="badge bg-secondary ms-2" th:text="${q.type}">객관식</span>
            <span class="badge bg-warning ms-2" th:if="${q.required}">필수</span>
          </span>
          <a th:href="@{/admin/survey/statistics(surveyId=${#strings.substring(q.id, 1)})}"
             class="btn btn-sm pastel-success">통계 보기</a>
        </li>
      </ul>
    </div>

    <div class="mt-4">
      <a th:href="@{/admin/dashboard}" class="btn btn-link">← 관리자 대시보드로 돌아가기</a>
    </div>
  </div>
</div>

</body>
</html>
